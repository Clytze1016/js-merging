<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/array/_hlstatic.js | @aureooms/js-merging</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-style.css"><script src="./inject/script/0-header.js"></script><meta name="description" content="merging code bricks for JavaScript"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@aureooms/js-merging"><meta property="twitter:description" content="merging code bricks for JavaScript"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/aureooms/js-merging.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#array">array</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-_hlstatic">_hlstatic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-_merge">_merge</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-tapemerge">tapemerge</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#iterable">iterable</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-iterables">iterables</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#nodes">nodes</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nodes">nodes</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/array/_hlstatic.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">

export function _hlstatic ( binarysearch , copy ) {

	/**
	 * Merges 2 arrays using the Hwang Lin algorithm.
	 *
	 *   /!\ aj - ai &gt;= bj - bi
	 */

	let hwanglin = function ( compare , a , ai , aj , b , bi , bj , c , ci ) {

		const o = ci - ai - bi ;
		let t = ai ;

		const m = aj - ai ;
		const n = bj - ai ;

		// g is the size of a block

		const alpha = Math.floor( Math.log( m / n ) / Math.log( 2 ) ) ;

		let g = Math.pow( 2 , alpha ) ;

		// for each block

		blocks : while ( bi &lt; bj &amp;&amp; ( ai + g &lt; aj || ( g = aj - ai - 1 ) ) ) {

			// t is the inner left bound
			t = ai ;

			// ai is the inner right bound
			ai = t + g ;

			while ( bi &lt; bj ) {

				// we will try to insert b_i in this block

				if ( compare( b[bi] , a[ai] ) &gt;= 0 ) {

					// b_i must be inserted to the left of this block
					// we copy the block to the output array and continue
					// with the next block
					copy( a , t , ai , c , o + t + bi ) ;
					continue blocks ;

				}

				// b_i is inside this block and smaller than a_i
				// we search its insertion position using a binary search algorithm
				let q = binarysearch( compare , a , t , ai , b[bi] ) ;

				// z is the insertion position
				let z = q[0] + q[1] ;

				// copy everything to the left of the insertion position
				// to the output array
				copy( a , t , z , c , o + t + bi ) ;

				// copy b_i to its insertion position in the output array
				c[o + bi + z] = b[bi] ;

				// update the inner left bound of the block
				t = z ;

				// go to the next b_i
				++bi ;

			}

		}

		// remaining elements are copied to the output array
		copy( a ,  t , aj , c , o +  t + bi ) ;
		copy( b , bi , bj , c , o + aj + bi ) ;

	} ;

	return hwanglin ;

}

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
